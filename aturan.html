<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aturan • Reveal Quiz</title>
  <style>
    :root{
      --panel:#d9d9d9;
      --stroke:#222;
      --text:#111;
      --muted:rgba(0,0,0,.68);

      --roundBig:28px;
      --round:22px;
      --w: 980px;
    }

    *{box-sizing:border-box;font-family:system-ui,Arial,sans-serif}
    body{margin:0;background:#fff;color:var(--text)}
    .page{max-width:var(--w);margin:0 auto;padding:26px}

    .stack{
      min-height:calc(100vh - 52px);
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:22px;
      align-items:center;
    }

    .ruleCard{
      width:min(900px, 92vw);
      height:340px;
      background:var(--panel);
      border:2px solid var(--stroke);
      border-radius:var(--roundBig);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:30px;
      text-align:center;
    }

    .ruleTitle{
      font-size:30px;
      font-weight:900;
      margin:0 0 14px;
      letter-spacing:.2px;
    }

    /* rapi tanpa bullets: pakai paragraf + baris */
    .ruleText{
      margin:0;
      max-width:760px;
      color:var(--muted);
      font-weight:700;
      line-height:1.75;
      font-size:16px;
    }
    .ruleText .line{
      display:block;
      margin:4px 0;
    }

    .loadingCard{
      width:min(900px, 92vw);
      height:120px;
      background:var(--panel);
      border:2px solid var(--stroke);
      border-radius:var(--roundBig);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px 24px;
    }

    .barShell{
      width:min(760px, 100%);
      height:24px;
      border:2px solid var(--stroke);
      border-radius:999px;
      overflow:hidden;
      /* sedikit gaya biar ga polos */
      background:
        linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.18));
      box-shadow:
        inset 0 2px 0 rgba(255,255,255,.55),
        inset 0 -2px 0 rgba(0,0,0,.08);
      position:relative;
    }

    .barFill{
      height:100%;
      width:0%;
      border-radius:999px;
      background:
        linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.10));
      box-shadow:
        inset 0 2px 0 rgba(255,255,255,.35),
        0 6px 14px rgba(0,0,0,.12);
      transition:width .14s linear;
    }

    /* garis halus di atas fill biar “glossy” */
    .barFill::after{
      content:"";
      position:absolute;
      left:0; top:0;
      height:50%;
      width:100%;
      background:linear-gradient(90deg, rgba(255,255,255,.35), rgba(255,255,255,0));
      opacity:.55;
      pointer-events:none;
    }

    .btnRow{
      width:min(900px, 92vw);
      display:flex;
      justify-content:center;
      gap:12px;
      flex-wrap:wrap;
      margin-top:2px;
    }
    .btn{
      background:var(--panel);
      border:2px solid var(--stroke);
      border-radius:var(--round);
      padding:12px 16px;
      font-weight:900;
      cursor:pointer;
      min-width:180px;
      text-align:center;
      user-select:none;
    }
    .btn:hover{filter:brightness(.98)}
  </style>
</head>
<body>
  <main class="page">
    <section class="stack">

      <div class="ruleCard">
        <div>
          <h1 class="ruleTitle">Aturan Game</h1>

          <p class="ruleText">
            <span class="line">Jawab soal pakai keypad (maksimal 3 digit).</span>
            <span class="line">Jika salah 3 kali, tombol Hint akan aktif.</span>
            <span class="line">Setiap jawaban benar akan membuka 1 tile.</span>
            <span class="line">Fase 1 (2×2) : timer 20 detik.</span>
            <span class="line">Fase 2 (3×3) : timer 15 detik.</span>
            <span class="line">Fase 3 (4×4) : timer 10 detik.</span>
            <span class="line">Jika tidak ada interaksi/timer habis, anda akan ditampilkan popup keluar.</span>
          </p>
        </div>
      </div>

      <div class="loadingCard">
        <div class="barShell" aria-label="Loading progress">
          <div id="barFill" class="barFill"></div>
        </div>
      </div>

      <div class="btnRow">
        <button class="btn" id="btnBack">Kembali</button>
        <button class="btn" id="btnSkip">Lewati</button>
      </div>

    </section>
  </main>

  <script>
    const DURATION_SEC = 20;
    const NEXT_PAGE = "HalLevel.html";
    const BACK_PAGE = "menu.html";

    const barFill = document.getElementById("barFill");
    const btnBack = document.getElementById("btnBack");
    const btnSkip = document.getElementById("btnSkip");

    let tickId = null;

    function goNext(){ window.location.href = NEXT_PAGE; }

    function start(){
      const startAt = Date.now();
      const totalMs = DURATION_SEC * 1000;

      barFill.style.width = "0%";
      if (tickId) clearInterval(tickId);

      tickId = setInterval(() => {
        const elapsed = Date.now() - startAt;
        const ratio = Math.min(1, elapsed / totalMs);
        barFill.style.width = Math.floor(ratio * 100) + "%";

        if (ratio >= 1){
          clearInterval(tickId);
          setTimeout(goNext, 220);
        }
      }, 100);
    }

    btnBack.addEventListener("click", () => {
      if (tickId) clearInterval(tickId);
      window.location.href = BACK_PAGE;
    });

    btnSkip.addEventListener("click", () => {
      if (tickId) clearInterval(tickId);
      goNext();
    });

    start();
  </script>
</body>
</html>

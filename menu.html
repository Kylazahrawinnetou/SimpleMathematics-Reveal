<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Math Reveal Menu</title>

  <style>
  :root{
    /* =========================
       ðŸŽ¨ GANTI WARNA DI SINI
       ========================= */

    --text:#111;

    /* Background tombol */
    --btn:#d6d6d6;        /* warna normal */
    --btnHover:#ffffff;   /* saat hover */
    --btnActive:#bfbfbf;  /* saat ditekan */

    /* Outline (border) */
    --stroke:#444;        /* outline normal */
    --strokeHover:#222;   /* outline saat hover */
  }

  *{
    box-sizing:border-box;
    font-family:system-ui, Arial, sans-serif;
  }

  body{
    margin:0;
    background:url("assets/img/bgmathreveal.png") center / cover no-repeat;
    color:var(--text);
    overflow:hidden;
  }

  /* layar full */
  .screen{
    position:relative;
    min-height:100vh;
    width:100%;
    text-align:center;
  }

  /* LOGO */
  .logo{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%);
    width:520px;
    max-width:85vw;
    height:auto;
    display:block;
    pointer-events:none;
    user-select:none;
  }

  /* wrapper tombol */
  .buttonWrap{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%);
    margin-top:220px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:14px;
    width:100%;
    padding:0 16px;
  }

  /* =========================
     ðŸ”˜ TOMBOL UTAMA
     ========================= */
  .btn{
    width:min(420px, 80vw);
    padding:16px 18px;
    font-size:28px;
    font-weight:800;

    border:5px solid var(--stroke); /* âœ… outline 8px */
    background:var(--btn);

    border-radius:22px;
    cursor:pointer;
    user-select:none;
    margin:0;

    /* bayangan bawah â†’ efek tombol fisik */
    box-shadow:0 10px 0 rgba(0,0,0,.35);

    transition:
      transform 0.15s ease,
      box-shadow 0.15s ease,
      background 0.15s ease,
      border-color 0.15s ease;
  }

  /* hover â†’ membesar + ganti warna */
  .btn:hover{
    background:var(--btnHover);
    border-color:var(--strokeHover);
    transform:scale(1.05);
  }

  /* ditekan â†’ turun + mengecil */
  .btn:active{
    background:var(--btnActive);
    transform:scale(0.97) translateY(6px);
    box-shadow:0 4px 0 rgba(0,0,0,.35);
  }

  /* tombol kecil */
  .btn.small{
    width:min(360px, 70vw);
    font-size:24px;
    padding:14px 18px;
    border-radius:18px;
  }
</style>

</head>
<body>

  <main class="screen">
    <img
      src="assets/img/logomathreveal.png"
      alt="Math Reveal"
      class="logo"
      draggable="false"
    />

    <div class="buttonWrap">
      <button id="btnStart" class="btn" type="button">Mulai</button>
      <button id="btnReset" class="btn small" type="button">Hapus Data</button>
    </div>
  </main>

  <!-- ðŸŽµ BGM LANJUT -->
  <audio id="bgm" loop preload="auto">
    <source src="assets/audio/mathreveal.mp3" type="audio/mpeg">
  </audio>

  <script>
    /* ===== BGM LANJUT DARI INDEX ===== */
    const bgm = document.getElementById("bgm");

    function resumeBgm(){
      if (localStorage.getItem("bgmUnlocked") !== "1") return;

      const t = Number(sessionStorage.getItem("bgmTime") || "0");
      if (t > 0){
        try{ bgm.currentTime = t; }catch(_){}
      }

      bgm.volume = 0.4;
      bgm.play().catch(()=>{});
    }

    function persistTime(){
      try{
        sessionStorage.setItem("bgmTime", String(bgm.currentTime || 0));
      }catch(_){}
    }

    resumeBgm();
    window.addEventListener("pagehide", persistTime);

    /* ===== SAVE SYSTEM ===== */
    const SAVE_KEY = "revealQuizSave";
    const NEXT_PAGE = "aturan.html";

    function makeNewSave(){
      return {
        version: 1,
        createdAt: Date.now(),
        level: 1,
        hintsLeft: 3,
        wrongTotal: 0,
        hintUsed: 0
      };
    }

    function loadSave(){
      try{
        const raw = localStorage.getItem(SAVE_KEY);
        return raw ? JSON.parse(raw) : null;
      }catch(_){
        return null;
      }
    }

    function save(data){
      localStorage.setItem(SAVE_KEY, JSON.stringify(data));
    }

    document.getElementById("btnStart").addEventListener("click", () => {
      if (!loadSave()) save(makeNewSave());
      persistTime();
      window.location.href = NEXT_PAGE;
    });

    document.getElementById("btnReset").addEventListener("click", () => {
      if (!confirm("Yakin mau hapus semua data game?")) return;
      localStorage.removeItem(SAVE_KEY);
      alert("Data game sudah dihapus.");
    });
  </script>

</body>
</html>
